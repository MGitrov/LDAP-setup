# Introduction
This repository demonstrates a setup for user authentication using LDAP combined with MFA in a Flask web application. The solution involves setting up an LDAP server with Docker, creating and managing users, and integrating an additional security layer using Time-based One-Time Passwords (TOTP) for MFA.

# Prerequisites
* Git
* Docker

# Directory Structure
```
LDAP-setup/
├── Dockerfile
├── docker-compose.yml
├── init.ldif
├── .env
├── README.md
└── app/
    ├── templates/
    │   ├── login.html
    │   ├── setup_mfa.html
    │   ├── mfa.html
    │   └── welcome.html
    └── app.py
```

# Deployment
1. Open the Terminal and run the following command:
``` bash
git clone https://github.com/MGitrov/LDAP-setup.git
```
2. Then you will have to go inside the "LDAP-setup" folder using the following command:
```bash
cd LDAP-setup
```
3. To start services, you will have to enter the following command:
```bash
docker-compose up -d
```
4. You may access the web application via your browser by typing the following address:
```bash
http://localhost:5000
```
5. Log in using the LDAP credentials specified in the ```init.ldif``` file:
* Username: maxim.petrov
* Password: mypassword

  or
* Username: israel.israeli
* Password: password123
6. Upon first login, scan the QR code with an authentication application (e.g., Google Authenticator, Authy, Microsoft Authenticator).
  
7. Enter the TOTP token (the 6 digit number) generated by the application.
   
